<!--components/comment.wxml-->
<view class="comment-container">
  <!-- é¡¶éƒ¨æ ‡é¢˜ -->
  <view class="header">
    <view class="title-section">
      <text class="title">åˆ†äº«ä½ çš„é˜…è¯»æ„Ÿæ‚Ÿ</text>
      <text class="subtitle">å†™ä¸‹æ­¤åˆ»çš„æƒ³æ³•ï¼Œè®°å½•é˜…è¯»çš„ç¾å¥½</text>
    </view>
    <view class="reward-badge">
      <text class="reward-text">+1â­</text>
    </view>
  </view>

  <!-- è¾“å…¥åŒºåŸŸ -->
  <view class="input-section">
    <view class="input-header">
      <text class="input-title">è¯»åæ„Ÿå†…å®¹</text>
      <text class="char-count">{{content.length}}/500</text>
    </view>
    <view class="textarea-wrapper">
      <textarea 
        class="thought-textarea"
        placeholder="åˆ†äº«ä½ çš„é˜…è¯»æ„Ÿå—..."
        placeholder-class="placeholder"
        value="{{content}}"
        bindinput="onInputChange"
        maxlength="500"
        auto-height
        show-confirm-bar="{{false}}"
      ></textarea>
      <view class="textarea-border"></view>
    </view>
  </view>

  <!-- æäº¤æŒ‰é’® -->
  <view class="submit-section">
    <button 
      class="submit-btn {{isSubmitting ? 'submitting' : ''}} {{!content ? 'disabled' : ''}}"
      bindtap="makeComments"
      hover-class="btn-hover"
      disabled="{{isSubmitting || !content}}"
    >
      <view class="btn-content">
        <text class="btn-icon" wx:if="{{!isSubmitting}}">ğŸ“</text>
        <text class="btn-loading" wx:else>â³</text>
        <text class="btn-text">
          {{isSubmitting ? 'æäº¤ä¸­...\n' : (content ? 'å‘å¸ƒè¯»åæ„Ÿ\n' : 'è¯·è¾“å…¥è¯»åæ„Ÿ\n')}}
        </text>
      </view>
    </button>
  </view>

  <!-- å·²æäº¤å†…å®¹ -->
  <view class="submitted-section" wx:if="{{submittedThoughts.length > 0}}">
    <view class="section-header">
      <text class="section-title">æˆ‘çš„é˜…è¯»è®°å½•</text>
      <text class="section-count">({{submittedThoughts.length}}ç¯‡)</text>
      <view class="refresh-btn" bindtap="loadThoughtsFromCloud">
        <text class="refresh-icon">ğŸ”„</text>
        <text class="refresh-text">åˆ·æ–°</text>
      </view>
    </view>

    <view class="thoughts-list">
      <view class="thought-card" wx:for="{{submittedThoughts}}" wx:key="id">
        <view class="card-header">
          <text class="thought-time">{{item.time}}</text>
          <view class="reward-indicator">
            <text class="star-icon">â­</text>
            <text class="reward-count">{{item.rewards}}</text>
          </view>
        </view>
        <view class="thought-content">{{item.content}}</view>
        <view class="card-footer">
          <text class="status-badge">å·²å‘å¸ƒ</text>
        </view>
      </view>
    </view>
  </view>

  <view class="empty-state" wx:else>
    <view class="empty-icon">ğŸ“š</view>
    <text class="empty-title">è¿˜æ²¡æœ‰è¯»åæ„Ÿ</text>
    <text class="empty-desc">å†™ä¸‹ç¬¬ä¸€ç¯‡è¯»åæ„Ÿï¼Œå¼€å¯ä½ çš„é˜…è¯»è®°å½•ä¹‹æ—…</text>
  </view>
</view>